SELECT SETTING_VALUE FROM INFORMATION_SCHEMA.SETTINGS WHERE SETTING_NAME = 'MODE'
CREATE TABLE IF NOT EXISTS ACCOUNTS (ID BIGINT AUTO_INCREMENT, LICENSE VARCHAR(36) NOT NULL, PIN VARCHAR(7) NOT NULL, EMAIL VARCHAR(128) NOT NULL, CREATED BIGINT NOT NULL, CONSTRAINT account_pk PRIMARY KEY (ID))
ALTER TABLE ACCOUNTS ADD CONSTRAINT license_idx UNIQUE (LICENSE)
CREATE TABLE IF NOT EXISTS POOLS (ID BIGINT AUTO_INCREMENT, LICENSE VARCHAR(36) NOT NULL, "name" VARCHAR(128) NOT NULL, VOLUME INT NOT NULL, UOM VARCHAR(6) NOT NULL, CONSTRAINT pool_pk PRIMARY KEY (ID))
CREATE TABLE IF NOT EXISTS CLEANINGS (ID BIGINT AUTO_INCREMENT, POOL_ID BIGINT NOT NULL, BRUSH BOOLEAN NOT NULL, NET BOOLEAN NOT NULL, SKIMMER_BASKET BOOLEAN NOT NULL, PUMP_BASKET BOOLEAN NOT NULL, PUMP_FILTER BOOLEAN NOT NULL, VACUUM BOOLEAN NOT NULL, CLEANED BIGINT NOT NULL, CONSTRAINT cleaning_pk PRIMARY KEY (ID), CONSTRAINT FK_CLEANINGS_POOL_ID__ID FOREIGN KEY (POOL_ID) REFERENCES POOLS(ID) ON DELETE RESTRICT ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS MEASUREMENTS (ID BIGINT AUTO_INCREMENT, POOL_ID BIGINT NOT NULL, TOTAL_CHLORINE INT NOT NULL, FREE_CHLORINE INT NOT NULL, COMBINED_CHLORINE DOUBLE PRECISION NOT NULL, PH DOUBLE PRECISION NOT NULL, CALCIUM_HARDNESS INT NOT NULL, TOTAL_ALKALINITY INT NOT NULL, CYANURIC_ACID INT NOT NULL, TOTAL_BROMINE INT NOT NULL, SALT INT NOT NULL, TEMPERATURE INT NOT NULL, MEASURED BIGINT NOT NULL, CONSTRAINT measurement_pk PRIMARY KEY (ID), CONSTRAINT FK_MEASUREMENTS_POOL_ID__ID FOREIGN KEY (POOL_ID) REFERENCES POOLS(ID) ON DELETE RESTRICT ON UPDATE RESTRICT)
CREATE TABLE IF NOT EXISTS CHEMICALS (ID BIGINT AUTO_INCREMENT, POOL_ID BIGINT NOT NULL, ADDITIVE VARCHAR(16) NOT NULL, AMOUNT DOUBLE PRECISION NOT NULL, UOM VARCHAR(6) NOT NULL, ADDED BIGINT NOT NULL, CONSTRAINT chemical_pk PRIMARY KEY (ID), CONSTRAINT FK_CHEMICALS_POOL_ID__ID FOREIGN KEY (POOL_ID) REFERENCES POOLS(ID) ON DELETE RESTRICT ON UPDATE RESTRICT)
